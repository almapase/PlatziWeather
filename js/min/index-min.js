!function(){function e(e){var t=["Error desconocido","Permiso denegado por el usuario","Posici칩n no est치 disponible","Timeout"];alert("Un error ocurri칩: "+t[e.code])}function t(e){var t=e.coords.latitude,o=e.coords.longitude;console.log("Tu posici칩n es: "+t+","+o),$.getJSON(u+"lat="+t+"&lon="+o,n)}function n(e){c(event),w.zone=e.name,w.icon=l+e.weather[0].icon+".png",w.temp=e.main.temp-273.15,w.temp_max=e.main.temp_max-273.15,w.temp_min=e.main.temp_min-273.15,w.main=e.weather[0].main,i(w)}function o(e){$.getJSON(p+h.val(),function(t){h.val(""),w={},w.zone=e.name,w.icon=l+e.weather[0].icon+".png",w.temp=e.main.temp-273.15,w.temp_min=e.main.temp_min-273.15,w.temp_max=e.main.temp_max-273.15,i(w,t.data.time_zone[0].localtime),_.push(w),localStorage.setItem("cities",JSON.stringify(_))})}function a(e){var t=document.querySelector(e);return document.importNode(t.content,!0)}function i(e,t){var n=a("#template--city"),o;o=t?t.split(" ")[1]:g,n.querySelector("[data-time]").innerHTML=o,n.querySelector("[data-city]").innerHTML=e.zone,n.querySelector("[data-icon]").src=e.icon,n.querySelector("[data-temp='max']").innerHTML=e.temp_max.toFixed(1),n.querySelector("[data-temp='min']").innerHTML=e.temp_min.toFixed(1),n.querySelector("[data-temp='current']").innerHTML=e.temp.toFixed(1),v.hide(),f.append(n)}function r(e){e.preventDefault(),$.getJSON(u+"q="+h.val(),o)}function c(e){e.preventDefault();var t=JSON.parse(localStorage.getItem("cities"));t.forEach(function(e){i(e)})}var m="d6a4075ceb419113c64885d9086d5",p="https://api.worldweatheronline.com/free/v2/tz.ashx?format=json&key="+m+"&q=",d="80114c7878f599621184a687fc500a12",u="http://api.openweathermap.org/data/2.5/weather?APPID="+d+"&",l="http://openweathermap.org/img/w/",s=new Date,g=s.toTimeString().substring(0,5),f=$("body"),v=$(".loader"),h=$("[data-input='cityAdd']"),S=$("[data-button='add']"),y=$("[data-saved-cities]"),_=[],w={};w.zone,w.icon,w.temp,w.temp_max,w.temp_min,w.main,S.on("click",r),y.on("click",c),h.on("Keypress",function(e){13==e.which&&r(e)}),navigator.geolocation?navigator.geolocation.getCurrentPosition(t,e):alert("Por favor, actualiza tu navegador")}();